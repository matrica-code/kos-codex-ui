import { Meta, Canvas } from "@storybook/blocks";
import { Snippet } from "../snippet";
import { LocalizationStory } from "./localization.stories";
import { LocalizationInterpolateStory } from "./localization-interpolate.stories";
import { LocalizationTransStory } from "./localization-trans.stories";

<Meta title="Foundations/10. Localization" />

# Localization and translations

kOS has built-in localization support to make it easy to create multilingual applications. The sdk offers a number of tools that manage localization in a similar way to the popular react-i18next package. The translation files are loaded via kab files.

## Translation files

Translation files are generated by the `kosui i18n:namespace` command. This command will generate a namespace file for each translation namespace in your application. The namespace file is a JSON file that contains the translations for that namespace.

## LocalizationProvider

The `LocalizationProvider` is a React component that wraps your application and provides the necessary context for localization. It takes a `appContext` array as a prop, which is a list of the translation namespaces to use. It also takes a locale prop.

<Snippet name="app@preview.tsx" />

<Canvas of={LocalizationStory} />

## useTranslation usage

The `useTranslation` hook is used to access the translations in your components. It returns a `t` function that takes a key and returns the translation for that key. The argument the hook takes is the namespace of the translations - translations are loaded asynchronously so only necessary namespaces are loaded.

<Snippet name="localization@localization.tsx" />

### variable interpolation

The `useTranslation` hook also supports variable interpolation. You can pass an object as the second argument to the `t` function, and the variables will be replaced in the translation.

<Snippet name="localization-interpolate@localization-interpolate.tsx" />

<Canvas of={LocalizationInterpolateStory} />

## Trans component & tag replacement

The `Trans` component is used to translate a block of text that contains HTML tags. It takes a `i18nKey` prop that is the key of the translation to use. It also takes an object of components that maps any tags to components, such as `react-router` links or other specific markup you might need. The `Trans` component also supports variable interpolation.

<Snippet name="localization-trans@localization-trans.tsx" />

<Canvas of={LocalizationTransStory} />
